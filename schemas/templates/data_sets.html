{% extends 'layout.html' %}

{% block body %}
{% load static %}

<div hidden id="schema_id">{{schema_id}}</div>
<section class="section-schema">
   <div class="row">
        <h1 class="table-name"> Data Sets </h1>
   </div>
    <div class="row justify-content-end position-relative position-relative">
        <form method="POST" action="{% url 'create_data_set' schema_id %}" role="form">
            {% csrf_token %}
            Rows:
            <input type="number" min="1" value="100" max="500000" name="rowsAmount">
            <button type="submit" href="{% url 'create_schema' %}" 
            class="btn btn-success btn-lg active btn-lg" role="button" 
            aria-pressed="true">Generate data</button>
        </form>

    </div>
    <div class="row">
        <table class="table table-bordered">
            <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Created</th>
                <th scope="col">Status</th>
                <th scope="col">Actions</th>
            </tr>
            </thead>
            <tbody>
            {% for dataset in data_sets %}
            <tr>
                <th scope="row"> <b> {{ iterator }} </b></th>
                <td> <div id="time{{ dataset.uuid }}"> {{dataset.time_of_creation}}</div></td>
                <td> <div id="status{{ dataset.uuid }}"> </div></td>
                <td>
                    <div class="row" id="action{{dataset.uuid}}">
                        <form method="get" id="download{{ dataset.uuid}}" action="{{ dataset.path_to_file }}">
                            <button type="submit" class="btn btn-link">Download</button>
                        </form>
                        <form method="post" action="{% url 'file_data_set' schema_id dataset.uuid %}">
                            {% csrf_token %}
                            <button type="submit" id="delete-button" class="btn btn-link" role="button" aria-pressed="true">Delete</button>
                        </form>

                    </div>
                </td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</section>
{% load static %}
<script src="{% static 'js/is_dataset_ready.js' %}"></script>
  {% endblock %}